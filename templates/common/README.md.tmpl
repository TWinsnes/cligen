# {{.AppName}}

< insert description >

![Demo](demo.gif)

> Update the above demo gif by running `make vhs`
> Details in the demo are defined in [demo.tape](demo.tape). See section further down for the details.

# First Steps

1. **Initialize Go modules**: Run `go mod tidy` to install dependencies.
2. **Build your app**: Run `make build` to compile the binary. The binary will be available at `dist/{{.AppName}}`.
3. **Verify the installation**: Run `dist/{{.AppName}}` to see the help output.
4. **Develop**: Start adding your commands in the `cmd/` directory.

{{ if .DocsEnabled }}
# Documentation

This project includes a Hugo-based documentation site located in the `www` directory.

## Local Development

1. Navigate to the documentation directory: `cd www`
2. Install dependencies: `hugo mod get`
3. Start the local development server: `hugo server`
4. View the documentation at `http://localhost:1313`

## Publishing

The documentation is configured to be published via GitHub Pages. You can enable this in your GitHub repository settings under **Settings > Pages**.
{{ end }}

{{ if .HomebrewEnabled }}
# Homebrew Distribution

This project is configured to automatically publish releases to a Homebrew tap.

## Configuration

1. **Create a Tap Repository**: If you haven't already, create a public repository on GitHub named `homebrew-tap` (e.g., `{{.HomebrewUsername}}/homebrew-tap`).
2. **Setup GitHub Secret**: 
   - Generate a Personal Access Token (PAT) with `repo` or `workflow` scope.
   - Add it as a secret named `TAP_GITHUB_TOKEN` in this repository's settings (**Settings > Secrets and variables > Actions**).

When you push a new tag (e.g., `v0.1.0`), GoReleaser will automatically update the formula in your tap.
{{ end }}

# Makefile targets

The following commands are available in the Makefile:

| Target      | Description                                                           |
|-------------|-----------------------------------------------------------------------|
| build       | Build the application binary and place it in the `dist` directory     |
| clean       | Remove build artifacts and temporary files                            |
| test        | Run all tests                                                         |
| lint        | Run linting checks using golangci-lint                                |
| vhs         | Generate demo.gif using VHS in a Docker container                     |


# GitHub Config

## GitHub Workflows

The following GitHub workflows are configured for this project:

| Workflow    | Description                                                           |
|-------------|-----------------------------------------------------------------------|
| CI          | Runs tests and linting on every push and pull request                 |
| Dependency Review | Scans dependencies for license compliance issues on pull requests |
| Gitleaks    | Scans for secrets in the repository on pull requests                  |
| Lint        | Runs lint checks on pull requests                                     |
| Release     | Creates a new release when a tag matching `v*` is pushed.             |
| Dependabot  | Keeps dependencies up to date automatically.                          |

The workflows are defined in `.github/workflows` directory. Each workflow is triggered by specific events:

- **CI Workflow**: Runs on every push and pull request to ensure code quality
  - Runs unit tests
  - Performs linting checks
  - Builds the application

- **Dependnecy Review**: Runs on every pull request
  - Scans all dependencies are matches their license against an allow list
  - Configured in `.github/dep-review-conf.yml`

- **Gitleaks**: Runs on every pull request
  - Scans the repository for secrets

- **Dependabot**: Automatically creates pull requests to update dependencies
  - Configured in `.github/dependabot.yml`

- **Lint**: Runs on every pull request
  - Runs linting checks using golangci-lint
  - Uses the configuration file `.golangci-lint.yml`

- **Release Workflow**: Triggered when a tag is pushed
  - Starts by running linting step to validate the code
  - Uses Goreleaser, configured in `.goreleaser.yaml`
  - Creates a new GitHub release
  - Builds and attaches binaries for multiple platforms
  - Generates checksums for the binaries
  - Generates an SBOM for each binary
  - Publishes changes to Homebrew for both macOS and Linux. See Homebrew Distribution section above for more details on how to configure


# Demo as code using VHS

You can automatically creat a demo gif of your cli application using (VHS by charmbracelet)[https://github.com/charmbracelet/vhs].
VHS is a tool that allows you to define user input as file and then record a terminal session. This can then be shared
as a gif. This makes it incredibly easy to update your demo as you make changes to your application.

The demo is defined in [demo.tape](demo.tape).  You can update the demo by modifying this file and then running `make vhs`.

We run VHS as a docker container, so we don't have to install dependencies like chromium on our local system. All the
steps required are defined in the `Makefile`.

---
This app was scaffolded using [cligen](https://github.com/twinsnes/cligen) ❤️